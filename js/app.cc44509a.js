(function(e){function t(t){for(var i,a,r=t[0],c=t[1],l=t[2],h=0,d=[];h<r.length;h++)a=r[h],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&d.push(s[a][0]),s[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(i=!1)}i&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},s={app:0},o=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="./";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"12be":function(e,t,n){"use strict";n("2b31")},"2b31":function(e,t,n){},5406:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Snake")],1)},o=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"snake"},[n("start-game",{attrs:{startShow:e.startShow},on:{startGame:function(t){return e.logic.startGame()}}}),n("end-game",{attrs:{endGameShow:e.endGameShow},on:{clickRestart:e.showLevelSelection}}),n("win-game",{attrs:{winGameShow:e.winGameShow},on:{clickRestart:e.showLevelSelection}}),e.gridShow?n("div",{staticClass:"snake-grid",style:{width:e.widthGrid+"px"}},[e._l(e.createGrid,(function(t,i){return[n("div",{key:i,staticClass:"snake-grid__item",class:{food:e.logic.isPositionOfFoodForSnake(t.x,t.y),"snake-body__item":e.logic.isPositionOfSnakeBody(t.x,t.y),"snake-body-piece":e.logic.isPositionOfSnakePieceBody(t.x,t.y),"snake-body-head":e.logic.isPositionOfSnakeHead(t.x,t.y)},style:{width:e.gridItemSize+"px",height:e.gridItemSize+"px"},attrs:{"data-X":t.x,"data-Y":t.y}})]})),e._m(0)],2):e._e(),n("mobile-control")],1)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"logo"},[i("img",{attrs:{src:n("dfc9"),alt:"logo"}})])}],c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.startShow?i("div",{staticClass:"start-game"},[e.bestResultGame?i("div",{staticClass:"best-result-game"},[e._v(" Ваш лучший результат: "),i("span",{staticClass:"best-result-game__total"},[e._v("bestResultGame")])]):e._e(),i("div",{staticClass:"start-game__title"},[e._v("Выберите уровень сложности:")]),i("form",{staticClass:"form"},[e._l(e.logic.levels,(function(t,n){return i("div",{key:n,staticClass:"form__item"},[i("label",{on:{click:function(n){return e.changeLevel(t.id)}}},[i("span",{staticClass:"form__title",class:{active:t.id===e.selectLevel}},[e._v(e._s(t.title))]),i("input",{staticClass:"form__input",attrs:{type:"radio",name:"level"}})])])})),i("button",{staticClass:"form__btn btn-start",on:{click:function(t){return t.preventDefault(),e.startGame.apply(null,arguments)}}},[e._v(" НАЧАТЬ ")])],2),this.widthWindow>1024?i("div",{staticClass:"start-game-info"},[i("div",{staticClass:"start-game-info__title"},[e._v("Управление:")]),i("img",{staticClass:"start-game-info__img",attrs:{src:n("a07e"),alt:"keyboard arrow controls"}})]):e._e()]):e._e()},l=[],u=(n("a9e3"),n("d4ec")),h=n("bee2");n("159b"),n("fb6a");function d(e){e<f()&&f()||localStorage.setItem("bestResultGame",e)}function f(){return localStorage.getItem("bestResultGame")||0}var m=function(){function e(t){Object(u["a"])(this,e),this.component=t,this.direction="ArrowRight",this.interval=null,this.prohibitionAbruptActions=!0,this.bestResultGame=0,this.total=0,this.snakePiece=[],this.foodIndex=[],this.levels=[{title:"Тяжелый",speed:200,grid:{x:35,y:25},winScore:40,startSnakeSize:2,id:"hard"},{title:"Средний",speed:400,grid:{x:20,y:15},winScore:25,startSnakeSize:3,id:"normal"},{title:"Лёгкий",speed:600,grid:{x:10,y:10},winScore:15,startSnakeSize:4,id:"easy"}]}return Object(h["a"])(e,[{key:"setComponent",value:function(e){this.component=e}},{key:"startGame",value:function(){this.component.startShow=!1,this.component.gridShow=!0,this.bindingControlKeys(),this.zeroingTotalOfGame(),this.creatingSnake(),this.launchMovement(),this.creatingFoodForSnake()}},{key:"winGame",value:function(){this.component.winGameShow=!0,this.updateBestResult(),this.resetTheGame()}},{key:"endGame",value:function(){this.component.endGameShow=!0,this.untyingControlKeys(),this.updateBestResult(),this.resetTheGame()}},{key:"resetTheGame",value:function(){clearInterval(this.interval),this.snakePiece=[],this.foodIndex=[],this.direction="ArrowRight",this.component.gridShow=!1}},{key:"changeLevel",value:function(e){var t=this;this.levels.forEach((function(n){n.id===e&&(t.component.speed=n.speed,t.component.grid=n.grid,t.component.winningScore=n.winScore,t.component.startSnakeSize=n.startSnakeSize)}))}},{key:"changingResultOfGame",value:function(){this.total=this.snakePiece.length-this.component.startSnakeSize}},{key:"addBestResult",value:function(){f()&&(this.bestResultGame=f())}},{key:"updateBestResult",value:function(){d(this.total),this.bestResultGame=f()}},{key:"zeroingTotalOfGame",value:function(){this.total=0}},{key:"launchMovement",value:function(){var e=this;this.interval=setInterval((function(){e.changingPosition(),e.prohibitionAbruptActions=!0}),this.component.speed)}},{key:"snakeMovements",value:function(e){"ArrowRight"!=e.key&&"ArrowLeft"!=e.key&&"ArrowUp"!=e.key&&"ArrowDown"!=e.key||this.moveSnake(e.key)}},{key:"checkDirectionToOpposite",value:function(e){if(this.prohibitionAbruptActions)return!("ArrowRight"===this.direction&&"ArrowLeft"===e||"ArrowLeft"===this.direction&&"ArrowRight"===e||"ArrowUp"===this.direction&&"ArrowDown"===e||"ArrowDown"===this.direction&&"ArrowUp"===e)}},{key:"moveSnake",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ArrowRight";this.checkDirectionToOpposite(e)&&(this.direction=e,this.prohibitionAbruptActions=!1)}},{key:"changingPosition",value:function(){var e=this.snakePiece[this.snakePiece.length-1][0],t=this.snakePiece[this.snakePiece.length-1][1];switch(this.direction){case"ArrowRight":this.snakePiece.push([e+1,t]);break;case"ArrowLeft":this.snakePiece.push([e-1,t]);break;case"ArrowUp":this.snakePiece.push([e,t-1]);break;case"ArrowDown":this.snakePiece.push([e,t+1]);break}this.isCatchingFood()||this.snakePiece.shift()}},{key:"bindingControlKeys",value:function(){document.addEventListener("keydown",this.snakeMovements.bind(this))}},{key:"untyingControlKeys",value:function(){document.removeEventListener("keydown",this.snakeMovements.bind(this))}},{key:"creatingFoodForSnake",value:function(){var e=this.component.grid,t=e.x,n=e.y,i=this.getRandomInRange(1,t),s=this.getRandomInRange(1,n),o=this.snakePiece.every((function(e){return!(e[0]===i&&e[1]===s)}));o?this.foodIndex=[i,s]:this.creatingFoodForSnake()}},{key:"creatingSnake",value:function(){for(var e=this.component.grid,t=e.x,n=e.y,i=this.getRandomInRange(this.component.startSnakeSize,t),s=this.getRandomInRange(1,n),o=0;o<this.component.startSnakeSize;o++)this.snakePiece.push([i-this.component.startSnakeSize+o,s])}},{key:"getRandomInRange",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},{key:"isCheckingIntersectionsWithHead",value:function(){return!!this.snakePiece.length&&(this.snakePiece[this.snakePiece.length-1][0]===this.foodIndex[0]&&this.snakePiece[this.snakePiece.length-1][1]===this.foodIndex[1])}},{key:"isCatchingFood",value:function(){return!!this.isCheckingIntersectionsWithHead()&&(this.changingResultOfGame(),this.creatingFoodForSnake(),!0)}},{key:"checkingSectionOfHeadAndBody",value:function(){for(var e=this.snakePiece[this.snakePiece.length-1],t=0;t<this.snakePiece.length-1;t++)e[0]===this.snakePiece[t][0]&&e[1]===this.snakePiece[t][1]&&this.endGame()}},{key:"endGameIfHeadIntersectsWithBody",value:function(){this.checkingSectionOfHeadAndBody()&&this.endGame()}},{key:"checkingWhetherUserHasWonGame",value:function(){this.total>=this.component.winningScore&&this.winGame()}},{key:"isPositionOfSnakeBody",value:function(e,t){return!!this.foodIndex.length&&this.snakePiece.some((function(n){return n[0]===e&&n[1]===t}))}},{key:"isPositionOfSnakeHead",value:function(e,t){return!!this.foodIndex.length&&(this.snakePiece[this.snakePiece.length-1][0]===e&&this.snakePiece[this.snakePiece.length-1][1]===t)}},{key:"isPositionOfSnakePieceBody",value:function(e,t){if(!this.foodIndex.length)return!1;var n=this.snakePiece.slice(0,-1);return n.some((function(n){return n[0]===e&&n[1]===t}))}},{key:"isPositionOfFoodForSnake",value:function(e,t){return!!this.foodIndex.length&&(e===this.foodIndex[0]&&t===this.foodIndex[1])}},{key:"changingPositionIfItOutsideGrid",value:function(e){var t=this.component.grid,n=t.x,i=t.y,s=e[e.length-1][0],o=e[e.length-1][1];s>n&&(this.snakePiece[this.snakePiece.length-1][0]=1),s<1&&(this.snakePiece[this.snakePiece.length-1][0]=n),o>i&&(this.snakePiece[this.snakePiece.length-1][1]=1),o<1&&(this.snakePiece[this.snakePiece.length-1][1]=i)}}]),e}(),g=new m,k=g,p={name:"startGame",data:function(){return{selectLevel:"easy",widthWindow:window.innerWidth,logic:k}},props:{bestResultGame:{type:[Number,String],default:0},startShow:{type:Boolean,default:!1}},methods:{changeLevel:function(e){this.selectLevel=e,k.changeLevel(e)},startGame:function(){this.$emit("startGame")}}},v=p,w=(n("12be"),n("2877")),y=Object(w["a"])(v,c,l,!1,null,"258895e6",null),b=y.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.endGameShow?n("div",{staticClass:"end-game"},[e._m(0),n("div",{staticClass:"end-game__item"},[n("span",{staticClass:"end-game__title"},[e._v("ВАШ РЕЗУЛЬТАТ:")]),n("span",{staticClass:"end-game__number"},[e._v(" "+e._s(e.logic.total)+" ")])]),n("button",{staticClass:"restart-btn",on:{click:function(t){return t.preventDefault(),e.clickRestart.apply(null,arguments)}}},[e._v(" НАЧАТЬ ЗАНОВО ")])]):e._e()},_=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"end-game__item"},[n("span",{staticClass:"end-game__msg"},[e._v("ВЫ ПРОИГРАЛИ")])])}],P={data:function(){return{logic:k}},props:{endGameShow:{type:Boolean,default:!1}},methods:{clickRestart:function(){this.$emit("clickRestart")}}},G=P,x=(n("f22a"),Object(w["a"])(G,S,_,!1,null,"1775b4aa",null)),C=x.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.winGameShow?n("div",{staticClass:"game-win"},[n("div",{staticClass:"game-win__title"},[e._v("Поздравляю")]),n("div",{staticClass:"game-win__text"},[e._v("Вы выйграли +1 к карме")]),n("button",{staticClass:"restart-btn",on:{click:function(t){return t.preventDefault(),e.clickRestart.apply(null,arguments)}}},[e._v(" НАЧАТЬ ЗАНОВО ")])]):e._e()},I=[],O={name:"winGame",props:{winGameShow:{type:Boolean,default:!1}},methods:{clickRestart:function(){this.$emit("clickRestart")}}},A=O,z=(n("70aa"),Object(w["a"])(A,R,I,!1,null,"0817979a",null)),j=z.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"arrow-box"},[n("button",{staticClass:"arrow-box__item arrow-box-left",on:{click:function(t){return e.logic.moveSnake("ArrowLeft")}}},[e._v(" > ")]),n("button",{staticClass:"arrow-box__item arrow-box-up",on:{click:function(t){return e.logic.moveSnake("ArrowUp")}}},[e._v(" > ")]),n("button",{staticClass:"arrow-box__item arrow-box-down",on:{click:function(t){return e.logic.moveSnake("ArrowDown")}}},[e._v(" > ")]),n("button",{staticClass:"arrow-box__item arrow-box-right",on:{click:function(t){return e.logic.moveSnake("ArrowRight")}}},[e._v(" > ")])])},B=[],F={data:function(){return{logic:k}}},M=F,W=(n("81a6"),Object(w["a"])(M,L,B,!1,null,"4aabfca9",null)),$=W.exports,E={name:"Snake",components:{startGame:b,endGame:C,winGame:j,mobileControl:$},data:function(){return{logic:k,winGameShow:!1,endGameShow:!1,startShow:!0,gridShow:!1,grid:{x:10,y:10},startSnakeSize:4,speed:600,defaultGridItemSize:80,winningScore:15}},methods:{showLevelSelection:function(){this.endGameShow=!1,this.winGameShow=!1,this.startShow=!0}},computed:{createGrid:function(){for(var e=this.grid,t=e.x,n=e.y,i=[],s=1;s<=n;s++)for(var o=1;o<=t;o++)i.push({x:o,y:s});return i},gridItemSize:function(){var e=this.grid,t=e.x,n=e.y,i=Math.max(t,n),s=window.innerWidth,o=s<550?this.defaultGridItemSize/3:s<700?this.defaultGridItemSize/2:this.defaultGridItemSize;return i>10?o/i*12:o},widthGrid:function(){var e=this.grid.x;return this.gridItemSize*e}},watch:{"logic.snakePiece":function(e){e.length&&(k.changingPositionIfItOutsideGrid(e),k.endGameIfHeadIntersectsWithBody(),k.checkingWhetherUserHasWonGame(),k.isCatchingFood())}},mounted:function(){k.setComponent(this),k.addBestResult()}},D=E,H=(n("6d69"),Object(w["a"])(D,a,r,!1,null,"7f37331f",null)),T=H.exports,U={name:"App",components:{Snake:T}},K=U,J=(n("5c0b"),Object(w["a"])(K,s,o,!1,null,null,null)),N=J.exports;n("f5df1");i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(N)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"6d69":function(e,t,n){"use strict";n("5406")},"70aa":function(e,t,n){"use strict";n("b7cc")},7903:function(e,t,n){},"81a6":function(e,t,n){"use strict";n("7903")},"9c0c":function(e,t,n){},a07e:function(e,t,n){e.exports=n.p+"img/controls.4da11f95.png"},b7cc:function(e,t,n){},cf87:function(e,t,n){},dfc9:function(e,t,n){e.exports=n.p+"img/snake-img.a4ddba48.svg"},f22a:function(e,t,n){"use strict";n("cf87")}});
//# sourceMappingURL=app.cc44509a.js.map